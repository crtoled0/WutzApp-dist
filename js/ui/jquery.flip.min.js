!function(t){var i=function(i,e){i.data("flipped",!0);var s="rotate"+i.data("axis");i.find(i.data("front")).css({transform:s+(i.data("reverse")?"(-180deg)":"(180deg)"),"z-index":"0"}),i.find(i.data("back")).css({transform:s+"(0deg)","z-index":"1"}),i.one(a(),function(){t(this).trigger("flip:done"),void 0!==e&&e.call(this)})},e=function(i,e){i.data("flipped",!1);var s="rotate"+i.data("axis");i.find(i.data("front")).css({transform:s+"(0deg)","z-index":"1"}),i.find(i.data("back")).css({transform:s+(i.data("reverse")?"(180deg)":"(-180deg)"),"z-index":"0"}),i.one(a(),function(){t(this).trigger("flip:done"),void 0!==e&&e.call(this)})},a=function(){var t,i=document.createElement("fakeelement"),e={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in e)if(void 0!==i.style[t])return e[t]};t.fn.flip=function(a,n){return"function"==typeof a&&(n=a),this.each(function(){var r=t(this);if(void 0===a||"boolean"!=typeof a&&"string"!=typeof a)if(r.data("initiated"))(void 0!==a.axis||void 0!==a.reverse)&&s.call(this,a,function(){r.trigger("flip:change"),void 0!==n&&n.call(this)});else{r.data("initiated",!0);var o=t.extend({axis:"y",reverse:!1,trigger:"click",speed:500,forceHeight:!1,forceWidth:!1,autoSize:!0,front:"auto",back:"auto"},a);"auto"==o.front?o.front=r.find(".front").length>0?".front":"div:first-child":"autostrict"==o.front&&(o.front="div:first-child"),"auto"==o.back?o.back=r.find(".back").length>0?".back":"div:first-child + div":"autostrict"==o.back&&(o.back="div:first-child + div"),r.data("reverse",o.reverse),r.data("axis",o.axis),r.data("front",o.front),r.data("back",o.back);var d="rotate"+("x"==o.axis.toLowerCase()?"x":"y"),f=2*r["outer"+("rotatex"==d?"Height":"Width")]();r.find(r.data("back")).css({transform:d+"("+(o.reverse?"180deg":"-180deg")+")"}),r.css({perspective:f,position:"relative"});var c=o.speed/1e3||.5,h=r.find(o.front).add(o.back,r);if(o.forceHeight?h.outerHeight(r.height()):o.autoSize&&h.css({height:"100%"}),o.forceWidth?h.outerWidth(r.width()):o.autoSize&&h.css({width:"100%"}),h.css({"backface-visibility":"hidden","transform-style":"preserve-3d",position:"absolute","z-index":"1"}),h.find("*").css({"backface-visibility":"hidden"}),r.find(r.data("back")).css({transform:d+"("+(o.reverse?"180deg":"-180deg")+")","z-index":"0"}),setTimeout(function(){h.css({transition:"all "+c+"s ease-out"}),void 0!==n&&n.call(this)},20),"click"==o.trigger.toLowerCase())r.on(t.fn.tap?"tap":"click",function(a){a||(a=window.event),r.find(t(a.target).closest('button, a, input[type="submit"]')).length||(r.data("flipped")?e(r):i(r))});else if("hover"==o.trigger.toLowerCase()){var v=function(){r.unbind("mouseleave",l),i(r),setTimeout(function(){r.bind("mouseleave",l),r.is(":hover")||e(r)},o.speed+150)},l=function(){e(r)};r.mouseenter(v),r.mouseleave(l)}}else"toggle"==a&&(a=!r.data("flipped")),a?i(r,n):e(r,n)}),this};var s=function(i,e){var a=!1;if(void 0!==i.axis&&t(this).data("axis")!=i.axis.toLowerCase()&&(t(this).data("axis",i.axis.toLowerCase()),a=!0),void 0!==i.reverse&&t(this).data("reverse")!=i.reverse&&(t(this).data("reverse",i.reverse),a=!0),a){var s=t(this).find(t(this).data("front")).add(t(this).data("back"),t(this)),n=s.css("transition");s.css({transition:"none"});var r="rotate"+t(this).data("axis");t(this).data("flipped")?t(this).find(t(this).data("front")).css({transform:r+(t(this).data("reverse")?"(-180deg)":"(180deg)"),"z-index":"0"}):t(this).find(t(this).data("back")).css({transform:r+"("+(t(this).data("reverse")?"180deg":"-180deg")+")","z-index":"0"}),setTimeout(function(){s.css({transition:n}),e.call(this)}.bind(this),0)}else setTimeout(e.bind(this),0)}}(jQuery);