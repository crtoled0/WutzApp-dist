function SongListModel(){var o=this;o.songs=ko.observableArray([]),o.init=function(){console.log("SongListModel Loaded")},o.loadSongList=function(){console.log("Loading Songs");var e=koMods.main.currSelected().album,a=koMods.main.barLoaded().idcatalog;o.songs([]);var n=wtzCache.getSongs(e.idalbum);n?o.songs(n):(koMods.main.openLoading(),window.wutzAdmin.callService({service:"getSongsPerAlbum/"+a+"/"+e.idalbum},function(a){console.log(a),o.songs(a),wtzCache.addSongs(e.idalbum,a),koMods.main.closeLoading()}))},o.addItem=function(o){var e=koMods.main.barLoaded();if(console.log(o),e.connected){var a=e.idcatalog,n=window.localStorage.getItem("guid"),s={token:e.dayToken,catId:a,songId:o.songid,guid:n};koMods.main.openLoading(),window.wutzAdmin.callService({service:"addSongToQueue/",method:"POST",params:s},function(a){if(koMods.main.closeLoading(),console.log(a),"OK"===a.added){var n={type:"success",title:locale.trans("ok"),msg:locale.trans("added_song_msg",{SONGNAME:o.name})};koMods.main.displayGetMessage(n)}else{var s="";s="added_max_songs"===a.msg?locale.trans("on_limit_msg",{ALLOWED_SONGS:e.songsAllowed}):"repeated"===a.msg?locale.trans("already_added",{SONGNAME:o.name}):"exptoken"===a.msg?locale.trans("expired_token"):locale.trans("gen_failed_msg");var n={type:"danger",title:"",msg:s};koMods.main.displayGetMessage(n)}})}else{console.log("No Connected to Bar");var d={type:"danger",title:"",msg:locale.trans("expired_token")};koMods.main.displayGetMessage(d),koMods.main.openConnect2Bar(),$("#songListContainer").modal("hide")}}}